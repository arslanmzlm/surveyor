(self["webpackChunksurveyor_front"]=self["webpackChunksurveyor_front"]||[]).push([[704],{7297:function(t){function e(t){return void 0===t}function r(t){return null===t}function s(t){return"boolean"===typeof t}function a(t){return t===Object(t)}function n(t){return Array.isArray(t)}function i(t){return t instanceof Date}function o(t,r){return r?a(t)&&!e(t.uri):a(t)&&"number"===typeof t.size&&"string"===typeof t.type&&"function"===typeof t.slice}function l(t,e){return o(t,e)&&"string"===typeof t.name&&(a(t.lastModifiedDate)||"number"===typeof t.lastModified)}function u(t){return!e(t)&&t}function d(t,p,c,h){p=p||{},c=c||new FormData,p.indices=u(p.indices),p.nullsAsUndefineds=u(p.nullsAsUndefineds),p.booleansAsIntegers=u(p.booleansAsIntegers),p.allowEmptyArrays=u(p.allowEmptyArrays),p.noAttributesWithArrayNotation=u(p.noAttributesWithArrayNotation),p.noFilesWithArrayNotation=u(p.noFilesWithArrayNotation),p.dotsForObjectNotation=u(p.dotsForObjectNotation);const m="function"===typeof c.getParts;return e(t)||(r(t)?p.nullsAsUndefineds||c.append(h,""):s(t)?p.booleansAsIntegers?c.append(h,t?1:0):c.append(h,t):n(t)?t.length?t.forEach(((t,e)=>{let r=h+"["+(p.indices?e:"")+"]";(p.noAttributesWithArrayNotation||p.noFilesWithArrayNotation&&l(t,m))&&(r=h),d(t,p,c,r)})):p.allowEmptyArrays&&c.append(p.noAttributesWithArrayNotation?h:h+"[]",""):i(t)?c.append(h,t.toISOString()):a(t)&&!o(t,m)?Object.keys(t).forEach((e=>{const r=t[e];if(n(r))while(e.length>2&&e.lastIndexOf("[]")===e.length-2)e=e.substring(0,e.length-2);const s=h?p.dotsForObjectNotation?h+"."+e:h+"["+e+"]":e;d(r,p,c,s)})):c.append(h,t)),c}t.exports={serialize:d}},3459:function(t,e,r){"use strict";r.d(e,{Z:function(){return p}});var s=r(2042),a=r(6414);const{t:n,te:i}=a["default"].global;class o{constructor(){this.errors={},this.status=null,this.message=""}has(t){for(let e in this.errors)if(e===t)return!0;return!1}any(){return null!==this.errors&&void 0!==this.errors&&Object.keys(this.errors).length>0}get(t){if(this.errors[t])return this.errors[t][0]}record(t){this.errors=void 0!==t.errors?t.errors:{},this.message=void 0!==t.message?t.message:""}setStatus(t){this.status=t}clear(t=null){if(t)return delete this.errors[t],void(this.errors.length||(this.message=""));this.errors={},this.status=null,this.message=""}getMessage(){return null!==this.status&&i("response.errors."+this.status)?n("response.errors."+this.status):this.message}}var l=o,u=r(7297);class d{constructor(t){this.$data=t,this.$errors=new l,this.$canSubmit=!0,this.$multipart=!1,this.$json=!1,this.$id=t["id"]??null;for(let e in t)this[e]=t[e]}setData(t){for(let e in this.$data)delete this[e];this.$data=t;for(let e in t)this[e]=t[e];this.$id=t["id"]??null,this.clearError()}updateData(t,e=!0){for(let r in this.$data)this.$data[r]=t[r],this[r]=t[r];e&&(this.$id=t["id"]??null),this.clearError()}getId(){return this.$id}deleteData(){for(let t in this.$data)delete this[t];this.$data={}}setFile(t,e,r=!1){if("object"===typeof e){if(this.$multipart=!0,r)return this[t]=e,!0;if(e[0]instanceof File)return this[t]=e[0],!0}return!1}getHeaders(){let t={};return this.$multipart&&(t["Content-Type"]="multipart/form-data"),t}getData(){let t={};for(let e in this.$data)t[e]=this[e];return t}formData(){let t={indices:!0,booleansAsIntegers:!0,allowEmptyArrays:!0};return(0,u.serialize)(this.getData(),t)}jsonData(){let t={};for(let e in this.$data)null!==this[e]&&"undefined"!==typeof this[e]&&(t[e]=this[e]);return t}addData(t,e){this[t]?this[t]=e:(this[t]=e,this.$data[t]=e)}isSubmittable(){return this.$canSubmit}isUpdate(){return null!==this.$id}json(){return this.$json=!0,this}isJson(){return this.$json}post(t,e=null){return e?this.submit("post",`${t}/${e}`):this.submit("post",t)}put(t,e=null){return e?this.submit("put",`${t}/${e}`):this.submit("put",`${t}`)}patch(t,e=null){return e?this.submit("patch",`${t}/${e}`):this.submit("patch",t)}delete(t,e=null){return e?this.submit("delete",`${t}/${e}`):this.submit("delete",t)}submit(t,e){this.beforeSubmit();let r=this.isJson()?this.jsonData():this.formData(),a={headers:this.getHeaders()};return new Promise(((n,i)=>{s.Z[t](e,r,a).then((t=>{this.onSuccess(t.data),n(t.data)})).catch((t=>{this.onFail(t.response),i(t.response.data)})).finally((()=>{this.afterSubmit()}))}))}reset(){for(let t in this.$data)this[t]=this.$data[t];this.$errors.clear()}hasError(t){return this.$errors.has(t)}getErrorMessage(){return this.$errors.getMessage()}getError(t){return this.$errors.get(t)}clearError(t=null){return this.$errors.clear(t)}beforeSubmit(){this.$canSubmit=!1}afterSubmit(){this.$canSubmit=!0}onSuccess(t){this.isUpdate()&&this.updateData(t,!1),this.reset()}onFail(t){this.$errors.setStatus(t.status),void 0!==t.data&&this.$errors.record(t.data)}}var p=d},4792:function(t,e,r){"use strict";var s=r(4677);class a{constructor(){this.toast=(0,s.pm)(),this.config={position:"bottom-center",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,showCloseButtonOnHover:!1,closeButton:"button",icon:!0}}fire(t,e="info",r={}){this.toast[e](t,{...this.config,...r})}}e["Z"]=new a},6704:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return P}});var s=r(3396),a=r(9242),n=r(7139);const i={class:"grid grid-cols-12 gap-4 sm:gap-5 lg:gap-6"},o={class:"col-span-12 xl:col-span-8"},l={class:"p-4 card sm:p-5"},u={class:"space-y-4"},d={for:"textName"},p={class:"relative flex mt-1.5"},c={class:"pointer-events-none absolute flex h-full w-10 items-center justify-center text-slate-400 peer-focus:text-primary dark:peer-focus:text-accent dark:text-navy-300"},h={for:"textSize"},m={class:"relative flex mt-1.5"},f={class:"pointer-events-none absolute flex h-full w-10 items-center justify-center text-slate-400 peer-focus:text-primary dark:peer-focus:text-accent dark:text-navy-300"},b={class:"rounded-lg border border-slate-200 p-4 dark:border-navy-600"},g={class:"space-y-4"},y={class:"sticky grid grid-cols-3 gap-x-2 gap-y-4 bg-white py-4 top-[61px] z-1"},v={class:"col-span-1 font-medium"},$=(0,s._)("span",{class:"inline-block w-10"},"#",-1),w={class:"col-span-1 font-medium"},x={class:"col-span-1 font-medium"},_={class:"col-span-1 flex"},k={class:"w-10 self-center font-medium"},z=["onUpdate:modelValue","name","id"],A={class:"col-span-1"},S={class:"col-span-1"},D={class:"text-end space-x-3"};function U(t,e,r,U,j,E){const W=(0,s.up)("breadcrumb-list"),N=(0,s.up)("v-icon"),F=(0,s.up)("validation-feedback"),C=(0,s.up)("v-cleave"),O=(0,s.up)("v-button");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(W,{items:j.breadcrumbs},null,8,["items"]),(0,s._)("div",i,[(0,s._)("div",o,[(0,s._)("div",l,[(0,s._)("form",{onInput:e[3]||(e[3]=t=>j.form.clearError(t.target.name)),onSubmit:e[4]||(e[4]=(0,a.iM)((t=>E.submit()),["prevent"]))},[(0,s._)("div",u,[(0,s._)("div",null,[(0,s._)("label",d,(0,n.zw)(t.$t("attributes.name")),1),(0,s._)("span",p,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>j.form.name=t),id:"textName",name:"name",type:"text",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 pl-9 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"},null,512),[[a.nr,j.form.name]]),(0,s._)("span",c,[(0,s.Wm)(N,{name:"user-group",size:"6"})])]),(0,s.Wm)(F,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(j.form.getError("name")),1)])),_:1})]),(0,s._)("div",null,[(0,s._)("label",h,(0,n.zw)(t.$t("attributes.size")),1),(0,s._)("span",m,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>j.form.size=t),id:"textSize",name:"size",type:"number",max:"10000",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 pl-9 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",onChange:e[2]||(e[2]=(...t)=>E.changeSize&&E.changeSize(...t))},null,544),[[a.nr,j.form.size]]),(0,s._)("span",f,[(0,s.Wm)(N,{name:"chevron-up-down",size:"6"})])]),(0,s.Wm)(F,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(j.form.getError("size")),1)])),_:1})]),(0,s._)("div",b,[(0,s._)("div",g,[(0,s._)("div",y,[(0,s._)("div",v,[$,(0,s._)("span",null,(0,n.zw)(t.$t("attributes.patient")),1)]),(0,s._)("div",w,(0,n.zw)(t.$t("attributes.phone")),1),(0,s._)("div",x,(0,n.zw)(t.$t("attributes.contact_phone")),1)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(j.form.patients,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"grid grid-cols-3 gap-x-2 gap-y-4"},[(0,s._)("div",_,[(0,s._)("span",k,(0,n.zw)(e+1)+".",1),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e=>t.name=e,name:`patient${e}Name`,id:`textPatient${e}Name`,type:"text",class:"h-9 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"},null,8,z),[[a.nr,t.name]])]),(0,s._)("div",A,[(0,s.Wm)(C,{modelValue:t.phone,"onUpdate:modelValue":e=>t.phone=e,options:{phone:!0,phoneRegionCode:"tr"},name:`patient${e}Phone`,id:`textPatient${e}Phone`,type:"text",class:"h-9 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"},null,8,["modelValue","onUpdate:modelValue","name","id"])]),(0,s._)("div",S,[(0,s.Wm)(C,{modelValue:t.contact_phone,"onUpdate:modelValue":e=>t.contact_phone=e,options:{phone:!0,phoneRegionCode:"tr"},name:`patient${e}ContactPhone`,id:`textPatient${e}ContactPhone`,type:"text",class:"h-9 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"},null,8,["modelValue","onUpdate:modelValue","name","id"])])])))),128))])]),(0,s._)("div",D,[(0,s.Wm)(O,{color:"warning",onClick:E.resetPatients,title:t.$t("placeholder.reset_patients")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(t.$t("labels.reset")),1)])),_:1},8,["onClick","title"]),(0,s.Wm)(O,{type:"submit",color:"primary",disabled:!j.form.isSubmittable()},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(t.$t("labels.submit")),1)])),_:1},8,["disabled"])])])],32)])])])],64)}var j=r(2042),E=r(3459),W=r(4792);const N={name:"",phone:"",contact_phone:""};var F={name:"GroupPatientsForm",props:{id:{type:String,required:!1}},data(){return{breadcrumbs:[{title:this.$t("titles.groups"),route:"groups"},{title:this.$t("titles.patients"),active:!0}],form:new E.Z({name:"",size:0,patients:[]})}},async created(){this.id&&await j.Z.get(`/group/${this.id}`).then((({data:t})=>{if(this.form.updateData(t),!t.patients||t.patients&&Array.isArray(t.patients)&&!t.patients.length){const e=Array(t.size).fill().map((()=>({...N})));this.form.addData("patients",e)}}))},methods:{changeSize(){const t=Array(this.form.size).fill().map(((t,e)=>this.form.patients[e]?this.form.patients[e]:{...N}));this.form.addData("patients",t)},resetPatients(){this.form.reset(),this.changeSize()},submit(){this.form.json().post("/group/update/patients",this.form.getId()).then((()=>{W.Z.fire(this.$t("response.success.update"),"success")})).catch((()=>{W.Z.fire(this.form.getErrorMessage(),"error")}))}}},C=r(89);const O=(0,C.Z)(F,[["render",U]]);var P=O}}]);
//# sourceMappingURL=704.d84d9a22.js.map