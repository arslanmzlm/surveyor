(self["webpackChunksurveyor_front"]=self["webpackChunksurveyor_front"]||[]).push([[903],{5109:function(e,t,r){"use strict";var s=r(3316),a=r(4905);const{t:o,te:l}=a["default"].global;class n{constructor(){(0,s.Z)(this,"errors",{}),(0,s.Z)(this,"status",null),(0,s.Z)(this,"message","")}has(e){for(const t in this.errors)if(t===e)return!0;return!1}any(){return null!==this.errors&&void 0!==this.errors&&Object.keys(this.errors).length>0}get(e){return this.errors[e]?this.errors[e][0]:null}record(e){this.status=e.response.status??null,this.errors=void 0!==e.response.data.errors?e.response.data.errors:{},this.message=void 0!==e.response.data.message?e.response.data.message:""}clear(e=null){if(e)return delete this.errors[e],void(this.errors.length||(this.status=null,this.message=""));this.errors={},this.status=null,this.message=""}getMessage(){return null!==this.status&&l("response.errors."+this.status)?o("response.errors."+this.status):this.message}}t.Z=n},7084:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var s=r(3316),a=(r(1379),r(6216)),o=r(4905),l=r(4850),n=r(5109),i=r(8805);const u=1500;var d=r(7342),c=r(9756);const{t:p}=o["default"].global;class m{constructor(e=null){(0,s.Z)(this,"errors",new n.Z),(0,s.Z)(this,"model",null),(0,s.Z)(this,"submittable",!0),(0,s.Z)(this,"defaultOptions",{showSuccessToast:!0,showFailToast:!0}),this.model=e}bind(e){this.model=e}getData(){const e=this.model?.getData();return this.hasFile(this.model)?(0,d.serialize)(e,{indices:!0,booleansAsIntegers:!0}):e}hasFile(e){for(const t in e){if(e[t]instanceof File||e[t]instanceof Blob)return!0;if(("object"===typeof e[t]&&null!==e[t]||(0,c.isArray)(e[t]))&&this.hasFile(e[t]))return!0}return!1}submit(e,t,r){this.beforeSubmit();const s=this.model,o=this.getData();return new Promise(((n,d)=>{a.Z[e](t,o).then((e=>{if(r.showSuccessToast&&l.Z.fire(p(`response.success.${r.action}`),"success"),"undefined"!==typeof r.action&&["store","update"].includes(r.action)&&s.saveAttributes(e.data),"undefined"!==typeof r.redirect){const e=r.redirect;r.idForRedirect&&this.model&&(e.params={id:this.model.id}),setTimeout((()=>{i.Z.push(e)}),u)}return n(e)})).catch((e=>(this.errors.record(e),r.showFailToast&&l.Z.fire(this.errors.getMessage(),"error"),d(e)))).finally((()=>{this.afterSubmit()}))}))}beforeSubmit(){this.submittable=!1}afterSubmit(){this.submittable=!0}store(e={}){const t=this.model;return e={...this.defaultOptions,action:"store",...e},this.submit("post",`${t.getMainRoute()}/store`,e)}update(e={}){const t=this.model;return e={...this.defaultOptions,action:"update",...e},this.submit("post",`${t.getMainRoute()}/update/${t.id}`,e)}delete(e={}){const t=this.model;return e={...this.defaultOptions,action:"delete",...e},this.submit("delete",`${t.getMainRoute()}/delete/${t.id}`,e)}}var f=m},7342:function(e){function t(e){return void 0===e}function r(e){return null===e}function s(e){return"boolean"===typeof e}function a(e){return e===Object(e)}function o(e){return Array.isArray(e)}function l(e){return e instanceof Date}function n(e,r){return r?a(e)&&!t(e.uri):a(e)&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.slice}function i(e,t){return n(e,t)&&"string"===typeof e.name&&(a(e.lastModifiedDate)||"number"===typeof e.lastModified)}function u(e){return!t(e)&&e}function d(e,c,p,m){c=c||{},p=p||new FormData,c.indices=u(c.indices),c.nullsAsUndefineds=u(c.nullsAsUndefineds),c.booleansAsIntegers=u(c.booleansAsIntegers),c.allowEmptyArrays=u(c.allowEmptyArrays),c.noAttributesWithArrayNotation=u(c.noAttributesWithArrayNotation),c.noFilesWithArrayNotation=u(c.noFilesWithArrayNotation),c.dotsForObjectNotation=u(c.dotsForObjectNotation);const f="function"===typeof p.getParts;return t(e)||(r(e)?c.nullsAsUndefineds||p.append(m,""):s(e)?c.booleansAsIntegers?p.append(m,e?1:0):p.append(m,e):o(e)?e.length?e.forEach(((e,t)=>{let r=m+"["+(c.indices?t:"")+"]";(c.noAttributesWithArrayNotation||c.noFilesWithArrayNotation&&i(e,f))&&(r=m),d(e,c,p,r)})):c.allowEmptyArrays&&p.append(c.noAttributesWithArrayNotation?m:m+"[]",""):l(e)?p.append(m,e.toISOString()):a(e)&&!n(e,f)?Object.keys(e).forEach((t=>{const r=e[t];if(o(r))while(t.length>2&&t.lastIndexOf("[]")===t.length-2)t=t.substring(0,t.length-2);const s=m?c.dotsForObjectNotation?m+"."+t:m+"["+t+"]":t;d(r,c,p,s)})):p.append(m,e)),p}e.exports={serialize:d}},8903:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return K}});var s=r(3723),a=r(4719),o=r(4386);const l={class:"p-4 card xl:p-5"},n={class:"grid grid-cols-1 gap-4 2xl:grid-cols-2"},i={class:"col-span-1"},u={for:"textName"},d={class:"mt-1.5"},c={class:"col-span-1"},p={for:"textSurname"},m={class:"mt-1.5"},f={class:"col-span-1"},h={for:"textUsername"},b={class:"relative flex mt-1.5"},y={class:"pointer-events-none absolute flex h-full w-10 items-center justify-center text-slate-400 peer-focus:text-primary dark:peer-focus:text-accent dark:text-navy-300"},v={class:"col-span-1"},w={for:"textPassword"},_={class:"relative flex mt-1.5"},g={class:"pointer-events-none absolute flex h-full w-10 items-center justify-center text-slate-400 peer-focus:text-primary dark:peer-focus:text-accent dark:text-navy-300"},x={class:"col-span-1"},k={for:"textEmail"},A={class:"relative flex mt-1.5"},W={class:"pointer-events-none absolute flex h-full w-10 items-center justify-center text-slate-400 peer-focus:text-primary dark:peer-focus:text-accent dark:text-navy-300"},U={class:"col-span-1"},z={for:"textPhone"},$={class:"relative flex mt-1.5"},V={class:"pointer-events-none absolute flex h-full w-10 items-center justify-center text-slate-400 peer-focus:text-primary dark:peer-focus:text-accent dark:text-navy-300"},Z={class:"col-span-1"},q={for:"selectRole"},F={class:"mt-1 w-full"},N={class:"col-span-1"},O={for:"selectHospital"},S={class:"mt-1 w-full"},j={class:"col-span-1"},I={for:"selectClinic"},E={class:"mt-1 w-full"},M={class:"col-span-full"},D={class:"text-end"};function R(e,t,r,R,P,C){const T=(0,s.up)("breadcrumb-list"),H=(0,s.up)("validation-feedback"),B=(0,s.up)("v-icon"),Y=(0,s.up)("v-cleave"),G=(0,s.up)("vue-select"),J=(0,s.up)("v-button");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(T,{items:P.breadcrumbs},null,8,["items"]),(0,s._)("div",l,[(0,s._)("form",{onInput:t[9]||(t[9]=e=>P.request.errors.clear(e.target.name)),onSubmit:t[10]||(t[10]=(0,a.iM)((e=>C.submit()),["prevent"]))},[(0,s._)("div",n,[(0,s._)("div",i,[(0,s._)("label",u,(0,o.zw)(e.$t("attributes.name")),1),(0,s._)("div",d,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>P.user.name=e),id:"textName",name:"name",type:"text",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",autocomplete:"off"},null,512),[[a.nr,P.user.name]])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("name")),1)])),_:1})]),(0,s._)("div",c,[(0,s._)("label",p,(0,o.zw)(e.$t("attributes.surname")),1),(0,s._)("div",m,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>P.user.surname=e),id:"textSurname",name:"surname",type:"text",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",autocomplete:"off"},null,512),[[a.nr,P.user.surname]])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("surname")),1)])),_:1})]),(0,s._)("div",f,[(0,s._)("label",h,(0,o.zw)(e.$t("attributes.username")),1),(0,s._)("span",b,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>P.user.username=e),id:"textUsername",name:"username",type:"text",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 pl-9 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",autocomplete:"off"},null,512),[[a.nr,P.user.username]]),(0,s._)("span",y,[(0,s.Wm)(B,{name:"user",class:"h-6 w-6"})])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("username")),1)])),_:1})]),(0,s._)("div",v,[(0,s._)("label",w,(0,o.zw)(e.$t("attributes.password")),1),(0,s._)("span",_,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>P.user.password=e),id:"textPassword",name:"password",type:"password",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 pl-9 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"},null,512),[[a.nr,P.user.password]]),(0,s._)("span",g,[(0,s.Wm)(B,{name:"key",class:"h-6 w-6"})])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("password")),1)])),_:1})]),(0,s._)("div",x,[(0,s._)("label",k,(0,o.zw)(e.$t("attributes.email")),1),(0,s._)("span",A,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>P.user.email=e),id:"textEmail",name:"email",type:"text",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 pl-9 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",autocomplete:"off"},null,512),[[a.nr,P.user.email]]),(0,s._)("span",W,[(0,s.Wm)(B,{name:"envelope",class:"h-6 w-6"})])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("email")),1)])),_:1})]),(0,s._)("div",U,[(0,s._)("label",z,(0,o.zw)(e.$t("attributes.phone")),1),(0,s._)("span",$,[(0,s.Wm)(Y,{modelValue:P.user.phone,"onUpdate:modelValue":t[5]||(t[5]=e=>P.user.phone=e),options:{phone:!0,phoneRegionCode:"tr"},id:"textPhone",name:"phone",type:"text",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 pl-9 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",autocomplete:"off"},null,8,["modelValue"]),(0,s._)("span",V,[(0,s.Wm)(B,{name:"phone",class:"h-6 w-6"})])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("phone")),1)])),_:1})]),(0,s._)("div",Z,[(0,s._)("label",q,(0,o.zw)(e.$t("attributes.role")),1),(0,s._)("div",F,[(0,s.Wm)(G,{options:P.roles.get(),label:"name",reduce:e=>e.id,modelValue:P.user.role_id,"onUpdate:modelValue":t[6]||(t[6]=e=>P.user.role_id=e),inputId:"selectRole",name:"role_id",placeholder:e.$t("placeholder.select_role")},null,8,["options","reduce","modelValue","placeholder"])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("role_id")),1)])),_:1})]),(0,s._)("div",N,[(0,s._)("label",O,(0,o.zw)(e.$t("attributes.hospital")),1),(0,s._)("div",S,[(0,s.Wm)(G,{options:P.hospitals.get(),label:"name",reduce:e=>e.id,modelValue:P.user.hospital_id,"onUpdate:modelValue":t[7]||(t[7]=e=>P.user.hospital_id=e),inputId:"selectHospital",name:"hospital_id",placeholder:e.$t("placeholder.select_hospital")},null,8,["options","reduce","modelValue","placeholder"])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("hospital_id")),1)])),_:1})]),(0,s._)("div",j,[(0,s._)("label",I,(0,o.zw)(e.$t("attributes.clinic")),1),(0,s._)("div",E,[(0,s.Wm)(G,{options:P.clinics.get(),label:"name",reduce:e=>e.id,modelValue:P.user.clinic_id,"onUpdate:modelValue":t[8]||(t[8]=e=>P.user.clinic_id=e),inputId:"selectClinic",name:"clinic_id",placeholder:e.$t("placeholder.select_clinic")},null,8,["options","reduce","modelValue","placeholder"])]),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(P.request.errors.get("clinic_id")),1)])),_:1})]),(0,s._)("div",M,[(0,s._)("div",D,[(0,s.Wm)(J,{type:"submit",color:"primary",disabled:!P.request.submittable},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.$t("labels.submit")),1)])),_:1},8,["disabled"])])])])],32)])],64)}var P=r(8710),C=r(8764),T=r(4906),H=r(3359),B=r(7084),Y={name:"UserEdit",props:{id:{type:[String,Number],required:!0}},data(){return{breadcrumbs:[{title:this.$t("titles.users"),route:"admin.users"},{title:this.$t("models.app.edit"),active:!0}],roles:new P["default"],hospitals:new C["default"],clinics:new T["default"],user:new H.Z,request:new B.Z}},created(){this.roles.fetchAll(),this.hospitals.fetchAll(),this.clinics.fetchAll(),this.user.fetch(this.id),this.request.bind(this.user)},methods:{submit(){this.request.update({redirect:{name:"admin.users"}})}}},G=r(8380);const J=(0,G.Z)(Y,[["render",R]]);var K=J}}]);
//# sourceMappingURL=903.05ab1abf.js.map