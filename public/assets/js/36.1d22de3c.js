"use strict";(self["webpackChunksurveyor_front"]=self["webpackChunksurveyor_front"]||[]).push([[36],{8989:function(e,t,i){i(7658);var s=i(2042),n=i(2995);class o{constructor(e){this.id=Object.hasOwn(e,"question_type_id")?e.id:null,this.question_type_id=Object.hasOwn(e,"question_type_id")?e.question_type_id:e.id,this.main_question_type_id=e.main_question_type_id,this.component=e.component,this.component_name=e.label,this.component_description=e.description,this.label=e.label,this.description=Object.hasOwn(e,"question_type_id")?e.description:"",this.required=e.required??!1,this.order=e.order,this.value=e.value,this.score=e.score??null,this.options=null!==e.options&&"object"===typeof e.options?JSON.parse(JSON.stringify(e.options)):{},this.values=e?.options?.related_to?e.values:Array.isArray(e.values)?JSON.parse(JSON.stringify(e.values)):e.values,this.question_order=null}get(e,t=null){return"undefined"!==typeof this[e]?this[e]:t}set(e,t){this[e]=t}getOption(e,t=null){return this.options&&"undefined"!==typeof this.options[e]?this.options[e]:t}setOption(e,t=null){null!==t?this.options[e]=t:delete this.options[e]}toggleOption(e){"undefined"===typeof this.options[e]?this.options[e]=!0:this.options[e]=!this.options[e]}getValue(e,t,i=null){return"undefined"!==typeof this.values[e][t]?this.values[e][t]:i}setValue(e,t,i=null){null!==i?this.values[e][t]=i:delete this.values[t]}addValue(e,t=null){this.values.push({label:e,score:t??this.values.length+1})}removeValue(e){this.values.splice(e,1)}isUpdatable(){return!("undefined"===typeof this.main_question_type_id||null===this.main_question_type_id)}storeType(){return new Promise(((e,t)=>{s.Z.post("/question-type/store",this).then((t=>{this.question_type_id=t.data.id,this.main_question_type_id=t.data.main_question_type_id,e(t)})).catch((e=>{t(e)}))}))}updateType(){return new Promise(((e,t)=>{s.Z.post(`/question-type/update/${this.question_type_id}`,this).then((t=>{e(t)})).catch((e=>{t(e)}))}))}getOptionImage(e="image",t=null){return this.getOption(e)?`${n.FX}/images/templates/options/${this.getOption(e)}`:t}getValueImage(e=null){return this.get("value")?`${n.FX}/images/templates/value/${this.get("value")}`:e}}t["Z"]=o},9421:function(e,t,i){i(7658);var s=i(8989),n=i(2042);class o{constructor(e=null){this.id=null,this.name=null,this.description=null,this.types=[],this.questions=[],e&&(this.id=e.id??null,this.name=e.name??null,this.description=e.description??null,e.questions&&this.saveQuestions(e.questions))}generateQuestion(e){let t={...e,order:this.questions.length+1};if("InputMultipleRadioGroup"===e.component&&(null===e?.options?.related_id||"undefined"===typeof e?.options?.related_id)&&(null===e?.options?.related_to||"undefined"===typeof e?.options?.related_to)){let e=[];this.questions.forEach((t=>{null!==t.getOption("related_id")&&e.push(parseInt(t.getOption("related_id")))})),"object"===typeof t.options&&null!==t.options||(t.options={}),t.options.related_id=e.length?Math.max(...e)+1:1}return new s.Z(t)}addQuestion(e){let t=this.generateQuestion(e);this.questions.push(t),this.reOrder()}addRelatedQuestion(e){let t={...e};"object"===typeof t.options&&null!==t.options||(t.options={}),t.options={...e.options,related_id:void 0,related_to:e.options.related_id};let i=this.generateQuestion(t);this.questions.push(i),this.reOrder()}getRelatedQuestions(e){return this.questions.filter((t=>parseInt(t.getOption("related_id"))===parseInt(e)||parseInt(t.getOption("related_to"))===parseInt(e)))}getRelatedQuestion(e){return this.questions.find((t=>parseInt(t.getOption("related_id"))===parseInt(e)))}getOnlyRelatedQuestions(e){return this.questions.filter((t=>parseInt(t.getOption("related_to"))===parseInt(e)))}saveQuestions(e,t=!0){t&&(this.questions=[]),e.forEach((e=>{if(e?.options?.related_to){let t=this.getRelatedQuestion(e?.options?.related_to);t&&(e.values=t.values)}this.addQuestion(e)}))}removeQuestion(e){let t=this.questions[e];if(t.getOption("related_id")){let e=parseInt(t.options.related_id);this.questions=this.questions.filter((t=>parseInt(t.getOption("related_id"))!==e&&parseInt(t.getOption("related_to"))!==e))}else this.questions.splice(e,1);this.reOrder()}removeQuestionByOrder(e){let t=this.questions.findIndex((t=>t.order===e));this.removeQuestion(t)}getQuestions(){return this.questions}getRenderAbleQuestions(){return this.questions.filter((e=>null===e.getOption("related_to")))}reOrder(){const e=[];this.questions.forEach((t=>{t.getOption("related_to")||e.push(t),t.getOption("related_id")&&this.getOnlyRelatedQuestions(t.getOption("related_id")).forEach((t=>{e.push(t)}))})),this.questions=e;let t=1;this.questions.forEach(((e,i)=>{e.component.startsWith("Input")&&(e.question_order=t,t++),e.order=i+1}))}getTypes(){n.Z.get("/question-types").then((({data:e})=>{this.types=e}))}addType(e){this.types.push(e)}removeType(e){const t=this.types.findIndex((t=>t.id===e));this.types.splice(t,1),this.questions=this.questions.filter((t=>t.question_type_id!==e)),this.reOrder()}deleteType(e){return new Promise(((t,i)=>{n.Z.post(`/question-type/delete/${e}`).then((i=>{this.removeType(e),t(i)})).catch((e=>{i(e)}))}))}editType(e,t){let i=this.types.findIndex((t=>t.id===e));this.types[i]=t}}t["Z"]=o},3036:function(e,t,i){i.d(t,{Z:function(){return Ie}});var s=i(3396),n=i(7139);const o={key:"isSurveyQuestionLabelShowAble",class:"mb-3 text-lg font-medium"},r={key:"isQuestionTypeInput"},l={key:"isQuestionHasDescription",class:"mt-3 text-xs+"};function u(e,t,i,u,a,p){return(0,s.wg)(),(0,s.iD)(s.HY,null,[p.labelShowAble?((0,s.wg)(),(0,s.iD)("p",o,[i.question.get("question_order")?((0,s.wg)(),(0,s.iD)("span",r,(0,n.zw)(e.$t("labels.survey_question_order",{order:i.question.get("question_order")})),1)):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,n.zw)(i.question.get("label")),1)])):(0,s.kq)("",!0),((0,s.wg)(),(0,s.j4)((0,s.LL)(`Survey${i.question.component}`),{template:i.template,question:i.question},null,8,["template","question"])),i.question.get("description")?((0,s.wg)(),(0,s.iD)("div",l,(0,n.zw)(i.question.get("description")),1)):(0,s.kq)("",!0)],64)}var a=i(9421),p=i(8989);const d={class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",type:"text"};function c(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("input",d)}var h={name:"SurveyInputText",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}}},g=i(89);const y=(0,g.Z)(h,[["render",c]]);var q=y;const m={class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",type:"number"};function v(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("input",m)}var _={name:"SurveyInputNumber",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}}};const f=(0,g.Z)(_,[["render",v]]);var b=f;const w={class:"flex flex-col gap-3"},O={class:"inline-flex"},k=["id"],x=["for"];function I(e,t,i,o,r,l){return(0,s.wg)(),(0,s.iD)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.question.get("values"),((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"flex gap-2"},[(0,s._)("label",O,[(0,s._)("input",{id:`question${i.question.get("id")}Radio${t}`,class:"h-4 w-4 rounded-full border-slate-400/70 form-radio is-basic checked:border-slate-500 checked:bg-slate-500 hover:border-slate-500 focus:border-slate-500 dark:border-navy-400 dark:checked:bg-navy-400",name:"basic",type:"radio"},null,8,k)]),(0,s._)("label",{for:`question${i.question.get("id")}Radio${t}`},(0,n.zw)(e.label),9,x)])))),128))])}var Z={name:"SurveyInputRadioGroup",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}}};const D=(0,g.Z)(Z,[["render",I]]);var S=D;const $={class:"flex flex-col gap-3"},Q={class:"inline-flex items-center space-x-2"},R=["id"],T=["for"];function z(e,t,i,o,r,l){return(0,s.wg)(),(0,s.iD)("div",$,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.question.get("values"),((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"flex gap-2"},[(0,s._)("label",Q,[(0,s._)("input",{id:`question${i.question.get("id")}Checkbox${t}`,class:"h-4 w-4 rounded border-slate-400/70 form-checkbox is-basic checked:border-slate-500 checked:bg-slate-500 hover:border-slate-500 focus:border-slate-500 dark:border-navy-400 dark:checked:bg-navy-400",type:"checkbox"},null,8,R)]),(0,s._)("label",{for:`question${i.question.get("id")}Checkbox${t}`},(0,n.zw)(e.label),9,T)])))),128))])}var H={name:"SurveyInputCheckboxGroup",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}}};const C=(0,g.Z)(H,[["render",z]]);var Y=C;const j={class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",type:"date"};function G(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("input",j)}var V={name:"SurveyInputDate",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}}};const L=(0,g.Z)(V,[["render",G]]);var A=L;const K={class:"mb-3 text-lg font-medium"},N=(0,s._)("td",null,null,-1),E={class:"py-2"},M={class:"font-medium"},J={class:"inline-flex"},U=["id","name"];function P(e,t,i,o,r,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("p",K,(0,n.zw)(i.question.getOption("title")),1),(0,s._)("table",null,[(0,s._)("thead",null,[(0,s._)("tr",null,[N,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.question.get("values"),((e,t)=>((0,s.wg)(),(0,s.iD)("td",{key:t,class:"text-center py-3"},(0,n.zw)(e.label),1)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.template.getRelatedQuestions(i.question.getOption("related_id")),(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.order},[(0,s._)("td",E,[(0,s._)("span",M,(0,n.zw)(e.$t("labels.survey_question_order",{order:t.get("question_order")})),1),(0,s.Uk)(" "+(0,n.zw)(t.label),1)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.get("values"),((e,i)=>((0,s.wg)(),(0,s.iD)("td",{key:i,class:"text-center py-2"},[(0,s._)("label",J,[(0,s._)("input",{id:`question${t.get("id")}Radio${i}`,name:`question${t.get("id")}`,class:"h-4 w-4 rounded-full border-slate-400/70 form-radio is-basic checked:border-slate-500 checked:bg-slate-500 hover:border-slate-500 focus:border-slate-500 dark:border-navy-400 dark:checked:bg-navy-400",type:"radio"},null,8,U)])])))),128))])))),128))])])],64)}var F={name:"SurveyInputMultipleRadioGroup",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}}};const X=(0,g.Z)(F,[["render",P]]);var B=X,W=i(9242);const ee={class:"flex items-center gap-x-3"},te={class:"shrink-0 text-lg"},ie=["min","max"],se={class:"shrink-0 text-lg"},ne={class:"text-center text-lg font-bold"};function oe(e,t,i,o,r,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",ee,[(0,s._)("div",te,(0,n.zw)(i.question.getOption("min",0)),1),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),class:"text-slate-500 form-range dark:text-navy-300",type:"range",min:i.question.getOption("min",0),max:i.question.getOption("max",100)},null,8,ie),[[W.nr,r.value]]),(0,s._)("div",se,(0,n.zw)(i.question.getOption("max",100)),1)]),(0,s._)("div",ne,(0,n.zw)(r.value),1)],64)}var re={name:"SurveyInputRange",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}},data(){return{value:0}}};const le=(0,g.Z)(re,[["render",oe]]);var ue=le;const ae=["src","title","alt"];function pe(e,t,i,o,r,l){return(0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(["flex gap-6",l.flexType])},[(0,s._)("p",{class:(0,n.C_)(["whitespace-pre-line",{"order-1":["top","left"].includes(i.question.getOption("image_position","top"))}])},(0,n.zw)(i.question.get("value")),3),i.question.getOptionImage()?((0,s.wg)(),(0,s.iD)("div",{key:"isDescriptionHasImage",class:(0,n.C_)(["shrink-0",{"order-0":["top","left"].includes(i.question.getOption("image_position","top")),"max-w-[50%]":["left","right"].includes(i.question.getOption("image_position","top"))}])},[(0,s._)("img",{src:i.question.getOptionImage(),title:e.$t("labels.uploaded_image"),alt:e.$t("labels.description_image"),class:"max-w-full"},null,8,ae)],2)):(0,s.kq)("",!0)],2)}var de={name:"SurveyOutputDescription",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}},computed:{flexType(){if(this.question.getOption("image")){let e=this.question.getOption("image_position");if(["top","bottom"].includes(e))return"flex-col";if(["right","left"].includes(e))return"flex-row"}return"flex-col"}}};const ce=(0,g.Z)(de,[["render",pe]]);var he=ce;const ge={key:"isDescriptionHasImage"},ye=["src","alt"];function qe(e,t,i,n,o,r){return i.question.getValueImage()?((0,s.wg)(),(0,s.iD)("div",ge,[(0,s._)("img",{src:i.question.getValueImage(),alt:i.question.get("label"),class:"max-w-full"},null,8,ye)])):(0,s.kq)("",!0)}var me={name:"SurveyOutputDescription",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}}};const ve=(0,g.Z)(me,[["render",qe]]);var _e=ve;function fe(e,t,i,o,r,l){return(0,s.wg)(),(0,s.j4)((0,s.LL)(l.listTagType),{class:(0,n.C_)(["space-y-4 ps-6",`list-${r.list_style}`])},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.question.get("values"),((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t},(0,n.zw)(e.label),1)))),128))])),_:1},8,["class"])}var be={name:"SurveyOutputList",props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}},data(){return{list_style:"disc"}},created(){this.list_style=this.question.getOption("list_style","disc")},computed:{listTagType(){return["decimal","decimal-leading-zero","upper-latin","lower-latin","upper-roman","lower-roman"].includes(this.list_style)?"ol":"ul"}}};const we=(0,g.Z)(be,[["render",fe]]);var Oe=we,ke={name:"SurveyInput",components:{SurveyInputText:q,SurveyInputNumber:b,SurveyInputRadioGroup:S,SurveyInputCheckboxGroup:Y,SurveyInputDate:A,SurveyInputMultipleRadioGroup:B,SurveyInputRange:ue,SurveyOutputDescription:he,SurveyOutputImage:_e,SurveyOutputList:Oe},props:{template:{type:a.Z,required:!0},question:{type:p.Z,required:!0}},computed:{labelShowAble(){let e=["InputMultipleRadioGroup","OutputImage"];return!e.includes(this.question.component)}}};const xe=(0,g.Z)(ke,[["render",u]]);var Ie=xe}}]);
//# sourceMappingURL=36.1d22de3c.js.map