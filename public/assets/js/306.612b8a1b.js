(self["webpackChunksurveyor_front"]=self["webpackChunksurveyor_front"]||[]).push([[306],{5109:function(t,e,s){"use strict";var r=s(3316),i=s(4905);const{t:o,te:n}=i["default"].global;class a{constructor(){(0,r.Z)(this,"errors",{}),(0,r.Z)(this,"status",null),(0,r.Z)(this,"message","")}has(t){for(const e in this.errors)if(e===t)return!0;return!1}any(){return null!==this.errors&&void 0!==this.errors&&Object.keys(this.errors).length>0}get(t){return this.errors[t]?this.errors[t][0]:null}record(t){this.status=t.response.status??null,this.errors=void 0!==t.response.data.errors?t.response.data.errors:{},this.message=void 0!==t.response.data.message?t.response.data.message:""}clear(t=null){if(t)return delete this.errors[t],void(this.errors.length||(this.status=null,this.message=""));this.errors={},this.status=null,this.message=""}getMessage(){return null!==this.status&&n("response.errors."+this.status)?o("response.errors."+this.status):this.message}}e.Z=a},7084:function(t,e,s){"use strict";s.d(e,{Z:function(){return f}});var r=s(3316),i=(s(1379),s(6216)),o=s(4905),n=s(4850),a=s(5109),l=s(8805);const u=1500;var d=s(7342),c=s(9756);const{t:h}=o["default"].global;class p{constructor(t=null){(0,r.Z)(this,"errors",new a.Z),(0,r.Z)(this,"model",null),(0,r.Z)(this,"submittable",!0),(0,r.Z)(this,"defaultOptions",{showSuccessToast:!0,showFailToast:!0}),this.model=t}bind(t){this.model=t}getData(){const t=this.model?.getData();return this.hasFile(this.model)?(0,d.serialize)(t,{indices:!0,booleansAsIntegers:!0}):t}hasFile(t){for(const e in t){if(t[e]instanceof File||t[e]instanceof Blob)return!0;if(("object"===typeof t[e]&&null!==t[e]||(0,c.isArray)(t[e]))&&this.hasFile(t[e]))return!0}return!1}submit(t,e,s){this.beforeSubmit();const r=this.model,o=this.getData();return new Promise(((a,d)=>{i.Z[t](e,o).then((t=>{if(s.showSuccessToast&&n.Z.fire(h(`response.success.${s.action}`),"success"),"undefined"!==typeof s.action&&["store","update"].includes(s.action)&&r.saveAttributes(t.data),"undefined"!==typeof s.redirect){const t=s.redirect;s.idForRedirect&&this.model&&(t.params={id:this.model.id}),setTimeout((()=>{l.Z.push(t)}),u)}return a(t)})).catch((t=>(this.errors.record(t),s.showFailToast&&n.Z.fire(this.errors.getMessage(),"error"),d(t)))).finally((()=>{this.afterSubmit()}))}))}beforeSubmit(){this.submittable=!1}afterSubmit(){this.submittable=!0}store(t={}){const e=this.model;return t={...this.defaultOptions,action:"store",...t},this.submit("post",`${e.getMainRoute()}/store`,t)}update(t={}){const e=this.model;return t={...this.defaultOptions,action:"update",...t},this.submit("post",`${e.getMainRoute()}/update/${e.id}`,t)}delete(t={}){const e=this.model;return t={...this.defaultOptions,action:"delete",...t},this.submit("delete",`${e.getMainRoute()}/delete/${e.id}`,t)}}var f=p},7342:function(t){function e(t){return void 0===t}function s(t){return null===t}function r(t){return"boolean"===typeof t}function i(t){return t===Object(t)}function o(t){return Array.isArray(t)}function n(t){return t instanceof Date}function a(t,s){return s?i(t)&&!e(t.uri):i(t)&&"number"===typeof t.size&&"string"===typeof t.type&&"function"===typeof t.slice}function l(t,e){return a(t,e)&&"string"===typeof t.name&&(i(t.lastModifiedDate)||"number"===typeof t.lastModified)}function u(t){return!e(t)&&t}function d(t,c,h,p){c=c||{},h=h||new FormData,c.indices=u(c.indices),c.nullsAsUndefineds=u(c.nullsAsUndefineds),c.booleansAsIntegers=u(c.booleansAsIntegers),c.allowEmptyArrays=u(c.allowEmptyArrays),c.noAttributesWithArrayNotation=u(c.noAttributesWithArrayNotation),c.noFilesWithArrayNotation=u(c.noFilesWithArrayNotation),c.dotsForObjectNotation=u(c.dotsForObjectNotation);const f="function"===typeof h.getParts;return e(t)||(s(t)?c.nullsAsUndefineds||h.append(p,""):r(t)?c.booleansAsIntegers?h.append(p,t?1:0):h.append(p,t):o(t)?t.length?t.forEach(((t,e)=>{let s=p+"["+(c.indices?e:"")+"]";(c.noAttributesWithArrayNotation||c.noFilesWithArrayNotation&&l(t,f))&&(s=p),d(t,c,h,s)})):c.allowEmptyArrays&&h.append(c.noAttributesWithArrayNotation?p:p+"[]",""):n(t)?h.append(p,t.toISOString()):i(t)&&!a(t,f)?Object.keys(t).forEach((e=>{const s=t[e];if(o(s))while(e.length>2&&e.lastIndexOf("[]")===e.length-2)e=e.substring(0,e.length-2);const r=p?c.dotsForObjectNotation?p+"."+e:p+"["+e+"]":e;d(s,c,h,r)})):h.append(p,t)),h}t.exports={serialize:d}},7306:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return k}});var r=s(3723),i=s(4719),o=s(4386);const n={class:"p-4 card xl:p-5"},a={class:"space-y-4"},l={for:"textName"},u={class:"relative flex mt-1.5"},d=(0,r._)("span",{class:"pointer-events-none absolute flex h-full w-10 items-center justify-center text-slate-400 peer-focus:text-primary dark:peer-focus:text-accent dark:text-navy-300"},[(0,r._)("i",{class:"text-base fa-regular fa-hospital"})],-1),c={for:"selectCity"},h={class:"mt-1 w-full"},p={for:"selectCounty"},f={class:"mt-1 w-full"},m={class:"text-end"};function b(t,e,s,b,y,g){const _=(0,r.up)("breadcrumb-list"),v=(0,r.up)("validation-feedback"),w=(0,r.up)("vue-select"),A=(0,r.up)("v-button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(_,{items:y.breadcrumbs},null,8,["items"]),(0,r._)("div",n,[(0,r._)("form",{onInput:e[3]||(e[3]=t=>y.request.errors.clear(t.target.name)),onSubmit:e[4]||(e[4]=(0,i.iM)((t=>g.submit()),["prevent"]))},[(0,r._)("div",a,[(0,r._)("div",null,[(0,r._)("label",l,(0,o.zw)(t.$t("attributes.name")),1),(0,r._)("span",u,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>y.hospital.name=t),id:"textName",name:"name",type:"text",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 pl-9 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",autocomplete:"off"},null,512),[[i.nr,y.hospital.name]]),d]),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(y.request.errors.get("name")),1)])),_:1})]),(0,r._)("div",null,[(0,r._)("label",c,(0,o.zw)(t.$t("attributes.city")),1),(0,r._)("div",h,[(0,r.Wm)(w,{options:y.cities.get(),label:"name",reduce:t=>t.id,modelValue:y.hospital.city_id,"onUpdate:modelValue":[e[1]||(e[1]=t=>y.hospital.city_id=t),g.citySelected],inputId:"selectCity",placeholder:t.$t("placeholder.select_city")},null,8,["options","reduce","modelValue","placeholder","onUpdate:modelValue"])]),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(y.request.errors.get("city_id")),1)])),_:1})]),(0,r._)("div",null,[(0,r._)("label",p,(0,o.zw)(t.$t("attributes.county")),1),(0,r._)("div",f,[(0,r.Wm)(w,{options:g.cityCounties,label:"name",reduce:t=>t.id,modelValue:y.hospital.county_id,"onUpdate:modelValue":[e[2]||(e[2]=t=>y.hospital.county_id=t),g.countySelected],inputId:"selectCounty",disabled:!(g.cityCounties.length>0),placeholder:y.hospital.city_id?t.$t("placeholder.select_county"):t.$t("placeholder.select_city")},null,8,["options","reduce","modelValue","disabled","placeholder","onUpdate:modelValue"])]),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(y.request.errors.get("county_id")),1)])),_:1})]),(0,r._)("div",m,[(0,r.Wm)(A,{type:"submit",color:"primary",disabled:!y.request.submittable},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(t.$t("labels.submit")),1)])),_:1},8,["disabled"])])])],32)])],64)}var y=s(8157),g=s(9374),_=s(6609),v=s(7084),w={name:"HospitalCreate",data(){return{breadcrumbs:[{title:this.$t("titles.hospitals"),route:"admin.hospitals"},{title:this.$t("models.hospital.add"),active:!0}],cities:new g["default"],counties:new _["default"],hospital:new y.Z,request:new v.Z}},created(){this.cities.fetchAll(),this.counties.fetchAll(),this.request.bind(this.hospital)},methods:{citySelected(){this.hospital.county_id=null,this.request.errors.clear("city_id"),this.request.errors.clear("county_id")},countySelected(){this.request.errors.clear("county_id")},submit(){this.request.store({redirect:{name:"admin.hospitals"}})}},computed:{cityCounties(){return this.hospital.city_id?this.hospital.city.counties??[]:[]}}},A=s(8380);const Z=(0,A.Z)(w,[["render",b]]);var k=Z}}]);
//# sourceMappingURL=306.612b8a1b.js.map