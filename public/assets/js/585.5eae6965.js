(self["webpackChunksurveyor_front"]=self["webpackChunksurveyor_front"]||[]).push([[585],{5109:function(t,e,s){"use strict";var i=s(3316),r=s(4905);const{t:n,te:o}=r["default"].global;class a{constructor(){(0,i.Z)(this,"errors",{}),(0,i.Z)(this,"status",null),(0,i.Z)(this,"message","")}has(t){for(const e in this.errors)if(e===t)return!0;return!1}any(){return null!==this.errors&&void 0!==this.errors&&Object.keys(this.errors).length>0}get(t){return this.errors[t]?this.errors[t][0]:null}record(t){this.status=t.response.status??null,this.errors=void 0!==t.response.data.errors?t.response.data.errors:{},this.message=void 0!==t.response.data.message?t.response.data.message:""}clear(t=null){if(t)return delete this.errors[t],void(this.errors.length||(this.status=null,this.message=""));this.errors={},this.status=null,this.message=""}getMessage(){return null!==this.status&&o("response.errors."+this.status)?n("response.errors."+this.status):this.message}}e.Z=a},7084:function(t,e,s){"use strict";s.d(e,{Z:function(){return f}});var i=s(3316),r=(s(1379),s(6216)),n=s(4905),o=s(4850),a=s(5109),l=s(8805);const u=1500;var c=s(7342),d=s(9756);const{t:m}=n["default"].global;class p{constructor(t=null){(0,i.Z)(this,"errors",new a.Z),(0,i.Z)(this,"model",null),(0,i.Z)(this,"submittable",!0),(0,i.Z)(this,"defaultOptions",{showSuccessToast:!0,showFailToast:!0}),this.model=t}bind(t){this.model=t}getData(){const t=this.model?.getData();return this.hasFile(this.model)?(0,c.serialize)(t,{indices:!0,booleansAsIntegers:!0}):t}hasFile(t){for(const e in t){if(t[e]instanceof File||t[e]instanceof Blob)return!0;if(("object"===typeof t[e]&&null!==t[e]||(0,d.isArray)(t[e]))&&this.hasFile(t[e]))return!0}return!1}submit(t,e,s){this.beforeSubmit();const i=this.model,n=this.getData();return new Promise(((a,c)=>{r.Z[t](e,n).then((t=>{if(s.showSuccessToast&&o.Z.fire(m(`response.success.${s.action}`),"success"),"undefined"!==typeof s.action&&["store","update"].includes(s.action)&&i.saveAttributes(t.data),"undefined"!==typeof s.redirect){const t=s.redirect;s.idForRedirect&&this.model&&(t.params={id:this.model.id}),setTimeout((()=>{l.Z.push(t)}),u)}return a(t)})).catch((t=>(this.errors.record(t),s.showFailToast&&o.Z.fire(this.errors.getMessage(),"error"),c(t)))).finally((()=>{this.afterSubmit()}))}))}beforeSubmit(){this.submittable=!1}afterSubmit(){this.submittable=!0}store(t={}){const e=this.model;return t={...this.defaultOptions,action:"store",...t},this.submit("post",`${e.getMainRoute()}/store`,t)}update(t={}){const e=this.model;return t={...this.defaultOptions,action:"update",...t},this.submit("post",`${e.getMainRoute()}/update/${e.id}`,t)}delete(t={}){const e=this.model;return t={...this.defaultOptions,action:"delete",...t},this.submit("delete",`${e.getMainRoute()}/delete/${e.id}`,t)}}var f=p},7342:function(t){function e(t){return void 0===t}function s(t){return null===t}function i(t){return"boolean"===typeof t}function r(t){return t===Object(t)}function n(t){return Array.isArray(t)}function o(t){return t instanceof Date}function a(t,s){return s?r(t)&&!e(t.uri):r(t)&&"number"===typeof t.size&&"string"===typeof t.type&&"function"===typeof t.slice}function l(t,e){return a(t,e)&&"string"===typeof t.name&&(r(t.lastModifiedDate)||"number"===typeof t.lastModified)}function u(t){return!e(t)&&t}function c(t,d,m,p){d=d||{},m=m||new FormData,d.indices=u(d.indices),d.nullsAsUndefineds=u(d.nullsAsUndefineds),d.booleansAsIntegers=u(d.booleansAsIntegers),d.allowEmptyArrays=u(d.allowEmptyArrays),d.noAttributesWithArrayNotation=u(d.noAttributesWithArrayNotation),d.noFilesWithArrayNotation=u(d.noFilesWithArrayNotation),d.dotsForObjectNotation=u(d.dotsForObjectNotation);const f="function"===typeof m.getParts;return e(t)||(s(t)?d.nullsAsUndefineds||m.append(p,""):i(t)?d.booleansAsIntegers?m.append(p,t?1:0):m.append(p,t):n(t)?t.length?t.forEach(((t,e)=>{let s=p+"["+(d.indices?e:"")+"]";(d.noAttributesWithArrayNotation||d.noFilesWithArrayNotation&&l(t,f))&&(s=p),c(t,d,m,s)})):d.allowEmptyArrays&&m.append(d.noAttributesWithArrayNotation?p:p+"[]",""):o(t)?m.append(p,t.toISOString()):r(t)&&!a(t,f)?Object.keys(t).forEach((e=>{const s=t[e];if(n(s))while(e.length>2&&e.lastIndexOf("[]")===e.length-2)e=e.substring(0,e.length-2);const i=p?d.dotsForObjectNotation?p+"."+e:p+"["+e+"]":e;c(s,d,m,i)})):m.append(p,t)),m}t.exports={serialize:c}},3585:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return v}});var i=s(3723),r=s(4386);const n=(0,i._)("i",{class:"fa fa-plus fa-sm fa-fw"},null,-1),o={class:"grid gap-8 lg:grid-cols-2 2xl:grid-cols-3"},a={class:"pointer-events-none grid gap-4 overflow-hidden p-4 h-[500px] template-preview"},l={class:"flex w-full items-center justify-between rounded-b border-t border-slate-200 bg-white p-3 py-4"},u=["title"],c={class:"mt-1 text-xs line-clamp-1"},d={class:"inline-flex gap-2"};function m(t,e,s,m,p,f){const h=(0,i.up)("router-link"),b=(0,i.up)("breadcrumb-list"),g=(0,i.up)("survey-input"),w=(0,i.up)("v-icon"),y=(0,i.up)("v-button"),v=(0,i.up)("data-table-pagination"),k=(0,i.up)("v-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(b,{items:p.breadcrumbs},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{to:{name:"app.template.create"},class:"text-white btn bg-primary hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"},{default:(0,i.w5)((()=>[n,(0,i.Uk)(" "+(0,r.zw)(t.$t("models.template.add")),1)])),_:1},8,["to"])])),_:1},8,["items"]),(0,i._)("div",o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(p.templates,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"rounded border border-slate-200 shadow-soft"},[(0,i._)("div",a,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.questions.slice(0,5),((t,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"p-4 card"},[(0,i.Wm)(g,{template:e,question:t},null,8,["template","question"])])))),128))]),(0,i._)("div",l,[(0,i._)("div",null,[(0,i._)("p",{class:"text-xl font-semibold line-clamp-1",title:e.name},(0,r.zw)(e.name),9,u),(0,i._)("p",c,(0,r.zw)(e.description),1)]),(0,i._)("div",d,[(0,i.Wm)(h,{to:{name:"app.template.edit",params:{id:e.id}},title:t.$t("labels.edit"),class:"h-10 w-10 rounded-full p-0 font-medium text-white btn bg-primary hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{name:"pencil-square",size:"5"})])),_:2},1032,["to","title"]),(0,i.Wm)(y,{color:"danger",title:t.$t("labels.delete"),size:10,icon:"",class:"rounded-full p-0",onClick:t=>f.deleteModal(e)},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{name:"archive-delete",size:"5"})])),_:2},1032,["title","onClick"]),(0,i.Wm)(h,{to:{name:"app.template.show",params:{id:e.id}},title:t.$t("labels.preview"),class:"h-10 w-10 rounded-full p-0 font-medium text-white btn bg-info hover:bg-info-focus focus:bg-info-focus active:bg-info-focus/90"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{name:"document-text",size:"5"})])),_:2},1032,["to","title"])])])])))),128))]),(0,i.Wm)(v,{pagination:p.templates.pagination,class:"card mt-5",onPageChanged:e[0]||(e[0]=t=>p.templates.setPage(t)),onLimitChanged:e[1]||(e[1]=t=>p.templates.setLimit(t))},null,8,["pagination"]),(0,i.Wm)(k,{ref:"modal"},{title:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.$t("modal.titles.delete")),1)])),body:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.$t("modal.messages.delete")),1)])),buttons:(0,i.w5)((()=>[(0,i.Wm)(y,{color:"danger",onClick:f.deleteData},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.$t("labels.delete")),1)])),_:1},8,["onClick"])])),_:1},512)],64)}var p=s(4930),f=s(7084),h=s(2522),b=s(2570),g={name:"TemplateList",components:{SurveyInput:b.Z,DataTablePagination:h.Z},data(){return{breadcrumbs:[{title:this.$t("titles.templates"),active:!0}],titles:[{column:"id",title:"#",sortable:!0},{column:"user_id",title:this.$t("attributes.user_id")},{column:"name",title:this.$t("attributes.template"),sortable:!0},{column:"description",title:this.$t("attributes.description")},{title:this.$t("labels.actions")}],templates:new p["default"],deleteSelect:null}},created(){this.templates.fetchWithFilters()},methods:{deleteModal(t){this.deleteSelect=t,this.$refs.modal.toggle()},deleteData(){const t=new f.Z(this.deleteSelect);t.delete().then((()=>{this.$refs.modal.toggle(),this.templates.fetchWithFilters()}))}}},w=s(8380);const y=(0,w.Z)(g,[["render",m]]);var v=y}}]);
//# sourceMappingURL=585.5eae6965.js.map