"use strict";(self["webpackChunksurveyor_front"]=self["webpackChunksurveyor_front"]||[]).push([[815],{4792:function(e,t,s){var l=s(4677);class o{constructor(){this.toast=(0,l.pm)(),this.config={position:"bottom-center",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,showCloseButtonOnHover:!1,closeButton:"button",icon:!0}}fire(e,t="info",s={}){this.toast[t](e,{...this.config,...s})}}t["Z"]=new o},3815:function(e,t,s){s.r(t),s.d(t,{default:function(){return V}});var l=s(3396),o=s(7139),i=s(9242);const r=(0,l._)("i",{class:"fa fa-plus fa-sm fa-fw"},null,-1),a={class:"py-3"},c={class:"grid grid-cols-1 gap-4 sm:grid-cols-3 sm:gap-5 lg:gap-6"},d={class:"block"},n={for:"textSearch"},u={class:"w-full mt-1.5"},p=["placeholder"],f={class:"block"},m={for:"selectCity"},h={class:"w-full mt-1.5"},b={class:"block"},y={for:"selectCounty"},_={class:"w-full mt-1.5"},w={class:"font-medium text-slate-700 dark:text-navy-100"},v={class:"font-medium text-slate-700 dark:text-navy-100"},g={class:"flex space-x-2"};function k(e,t,s,k,$,z){const x=(0,l.up)("router-link"),C=(0,l.up)("breadcrumb-list"),W=(0,l.up)("vue-select"),U=(0,l.up)("v-icon"),V=(0,l.up)("v-button"),Z=(0,l.up)("data-table"),D=(0,l.up)("v-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(C,{items:$.breadcrumbs},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{to:{name:"hospital.create"},class:"font-medium text-white btn bg-info hover:bg-info-focus focus:bg-info-focus active:bg-info-focus/90"},{default:(0,l.w5)((()=>[r,(0,l.Uk)(" "+(0,o.zw)(e.$t("labels.add")),1)])),_:1},8,["to"])])),_:1},8,["items"]),(0,l.Wm)(Z,{titles:$.titles,repository:$.repository},{filters:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l._)("div",c,[(0,l._)("div",d,[(0,l._)("label",n,(0,o.zw)(e.$t("attributes.name")),1),(0,l._)("div",u,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>$.repository.filters.search=e),id:"textSearch",type:"text",placeholder:e.$t("placeholder.search"),class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"},null,8,p),[[i.nr,$.repository.filters.search]])])]),(0,l._)("div",f,[(0,l._)("label",m,(0,o.zw)(e.$t("attributes.county"))+":",1),(0,l._)("div",h,[(0,l.Wm)(W,{options:$.cities,label:"name",reduce:e=>e.id,modelValue:$.repository.filters.city_id,"onUpdate:modelValue":t[1]||(t[1]=e=>$.repository.filters.city_id=e),inputId:"selectCity",placeholder:e.$t("placeholder.select_city")},null,8,["options","reduce","modelValue","placeholder"])])]),(0,l._)("div",b,[(0,l._)("label",y,(0,o.zw)(e.$t("attributes.county"))+":",1),(0,l._)("div",_,[(0,l.Wm)(W,{options:z.counties,label:"name",reduce:e=>e.id,modelValue:$.repository.filters.county_id,"onUpdate:modelValue":t[2]||(t[2]=e=>$.repository.filters.county_id=e),inputId:"selectCounty",disabled:!(z.counties.length>0),placeholder:$.repository.filters.city_id?e.$t("placeholder.select_county"):e.$t("placeholder.select_city")},null,8,["options","reduce","modelValue","disabled","placeholder"])])])])])])),body:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)($.repository.getItems(),(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",w,(0,o.zw)(t.id),1),(0,l._)("td",v,(0,o.zw)(t.name),1),(0,l._)("td",null,(0,o.zw)(t.city.name),1),(0,l._)("td",null,(0,o.zw)(t.county.name),1),(0,l._)("td",null,[(0,l._)("div",g,[(0,l.Wm)(x,{to:{name:"hospital.edit",params:{id:t.id}},title:e.$t("labels.edit"),class:"h-10 w-10 rounded-full p-0 font-medium text-white btn bg-primary hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{name:"pencil-square",size:"5"})])),_:2},1032,["to","title"]),(0,l.Wm)(V,{color:"error",icon:"",size:10,title:e.$t("labels.delete"),onClick:e=>z.deleteModal(t.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{name:"archive-delete",size:"5"})])),_:2},1032,["title","onClick"])])])])))),128))])),_:1},8,["titles","repository"]),(0,l.Wm)(D,{ref:"modal"},{title:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("modal.titles.delete")),1)])),body:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("modal.messages.delete")),1)])),buttons:(0,l.w5)((()=>[(0,l.Wm)(V,{color:"error",onClick:z.deleteData},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("labels.delete")),1)])),_:1},8,["onClick"])])),_:1},512)],64)}var $=s(306),z=s(2042),x=s(4792),C={name:"HospitalList",data(){return{breadcrumbs:[{title:this.$t("titles.hospitals"),active:!0}],titles:[{column:"id",title:"#",sortable:!0},{column:"name",title:this.$t("attributes.hospital"),sortable:!0},{title:this.$t("attributes.city")},{title:this.$t("attributes.county")},{title:this.$t("labels.actions")}],repository:new $.Z("/hospitals",{search:"",city_id:null,county_id:null}),cities:null,delete:null}},methods:{deleteModal(e){this.delete=e,this.$refs.modal.toggle()},deleteData(){z.Z.post(`/hospital/delete/${this.delete}`).then((()=>{x.Z.fire(this.$t("response.success.delete"),"success"),this.$refs.modal.toggle(),this.repository.fetch()})).catch((e=>{x.Z.fire(this.$t("response.errors."+e.response.status),"error")}))}},created(){this.repository.fetch(),z.Z.get("/cities").then((({data:e})=>{this.cities=e}))},computed:{counties(){if(this.repository.filters.city_id){const e=this.cities.find((({id:e})=>this.repository.filters.city_id===e));return e.counties}return[]}}},W=s(89);const U=(0,W.Z)(C,[["render",k]]);var V=U}}]);
//# sourceMappingURL=815.72e9f94b.js.map