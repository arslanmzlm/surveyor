"use strict";(self["webpackChunksurveyor_front"]=self["webpackChunksurveyor_front"]||[]).push([[213],{1576:function(e,t,l){l.r(t),l.d(t,{default:function(){return j}});var s=l(3723),a=l(4386),o=l(4719);const i={class:"grid grid-cols-10 gap-4 sm:gap-5 lg:gap-6"},d={class:"col-span-full space-y-6 2xl:col-span-2"},n={class:"p-4 card sm:p-5"},r={for:"textName",class:"font-medium"},u={class:"mt-1.5"},p={class:"mt-3"},c={for:"textDescription",class:"font-medium"},m={class:"mt-1.5"},b={class:"sticky top-[76px] space-y-6"},y={class:"p-4 card space-y-4 sm:p-5"},f=["onClick"],g={class:"font-medium"},_=["onClick","title"],h=(0,s._)("i",{class:"fa fa-times fa-lg"},null,-1),v=[h],w=["onClick","title"],k=(0,s._)("i",{class:"fa fa-regular fa-square-plus fa-lg"},null,-1),x=[k],Q={class:"p-4 card sm:p-5"},M={class:"col-span-full flex flex-col gap-5 2xl:col-span-8"},C={class:"grow p-4 card sm:p-5"},T={class:"text-start space-y-3"},q={for:"numberAddMultipleQuestionCount",class:"font-medium"};function $(e,t,l,h,k,$){const z=(0,s.up)("breadcrumb-list"),U=(0,s.up)("v-button"),W=(0,s.up)("question-input"),D=(0,s.up)("draggable"),Z=(0,s.up)("v-modal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(z,{items:k.breadcrumbs},null,8,["items"]),(0,s._)("div",i,[(0,s._)("div",d,[(0,s._)("div",n,[(0,s._)("div",null,[(0,s._)("label",r,(0,a.zw)(e.$t("attributes.survey_name")),1),(0,s._)("div",u,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>k.template.name=e),id:"textName",name:"template_name",type:"text",class:"w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-input peer hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",autocomplete:"off"},null,512),[[o.nr,k.template.name]])])]),(0,s._)("div",p,[(0,s._)("label",c,(0,a.zw)(e.$t("attributes.survey_description")),1),(0,s._)("div",m,[(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>k.template.description=e),id:"textDescription",class:"w-full resize-y rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 form-textarea form-input hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",rows:"3"},null,512),[[o.nr,k.template.description]])])])]),(0,s._)("div",b,[(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.questionTypes,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"flex justify-between rounded border border-slate-200 dark:border-navy-600"},[(0,s._)("button",{class:"flex grow flex-col p-3 text-start",onClick:e=>k.template.addQuestion(t)},[(0,s._)("span",g,(0,a.zw)(t.label),1),(0,s._)("small",null,(0,a.zw)(t.description),1)],8,f),t.isUpdatable?((0,s.wg)(),(0,s.iD)("button",{key:"isQuestionTypeCustom",type:"button",class:"p-3 text-slate-400 transition-colors close hover:text-slate-800",onClick:e=>$.deleteTypeModal(t),title:e.$t("modal.titles.delete_question_type")},v,8,_)):(0,s.kq)("",!0),(0,s._)("button",{type:"button",class:"p-3 text-slate-400 transition-colors close hover:text-slate-800",onClick:e=>$.addMultipleQuestionsModal(t),title:e.$t("modal.titles.add_multiple_questions")},x,8,w)])))),128))]),(0,s._)("div",Q,[(0,s._)("div",null,[(0,s.Wm)(U,{onClick:$.submit},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("labels.submit")),1)])),_:1},8,["onClick"])])])])]),(0,s._)("div",M,[(0,s._)("div",C,[(0,s.Wm)(D,(0,s.dG)({list:k.template.questions,group:"questions","item-key":"order","component-data":{tag:"div",type:"transition-group",name:k.drag?null:"flip-list"}},$.dragOptions,{handle:".handle",class:"grow space-y-4",onStart:t[2]||(t[2]=e=>k.drag=!0),onEnd:t[3]||(t[3]=e=>k.drag=!1),onChange:t[4]||(t[4]=e=>k.template.reOrder()),"scroll-sensitivity":200,"force-fallback":!0,"fallback-tolerance":1}),{item:(0,s.w5)((({element:e,index:t})=>[e.isRenderAble?((0,s.wg)(),(0,s.j4)(W,{key:0,template:k.template,question:e,index:t},null,8,["template","question","index"])):(0,s.kq)("",!0)])),_:1},16,["list","component-data"])])])]),(0,s.Wm)(Z,{ref:"deleteQuestionTypeModal"},{title:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("modal.titles.delete_question_type")),1)])),body:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("modal.messages.delete")),1)])),buttons:(0,s.w5)((()=>[(0,s.Wm)(U,{color:"danger",onClick:$.deleteType},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("labels.delete")),1)])),_:1},8,["onClick"])])),_:1},512),(0,s.Wm)(Z,{ref:"addMultipleQuestionsModal"},{title:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("modal.titles.add_multiple_questions")),1)])),body:(0,s.w5)((()=>[(0,s._)("div",T,[(0,s._)("div",null,[(0,s._)("label",q,(0,a.zw)(e.$t("attributes.question_count")),1),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>k.addMultipleQuestionCount=e),id:"numberAddMultipleQuestionCount",class:"form-input mt-2 w-full rounded-lg border border-slate-300 bg-transparent p-2 text-xs+ placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent",type:"number",min:"1",max:"99"},null,512),[[o.nr,k.addMultipleQuestionCount]])])])])),buttons:(0,s.w5)((()=>[(0,s.Wm)(U,{color:"success",onClick:$.addMultipleQuestions},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("labels.submit")),1)])),_:1},8,["onClick"])])),_:1},512)],64)}var z=l(9712),U=l(2409),W=l.n(U),D=l(5013),Z=l(4296),A=l(7084),N={name:"TemplateEdit",components:{draggable:W(),QuestionInput:D.Z},props:{id:{type:[String,Number],required:!1}},data(){return{breadcrumbs:[{title:this.$t("titles.templates"),route:"admin.templates"},{title:this.$t("models.template.edit"),active:!0}],drag:!1,deleteQuestionType:null,addMultipleQuestionType:null,addMultipleQuestionCount:1,questionTypes:new Z["default"],template:new z.Z,request:new A.Z}},created(){this.questionTypes.fetch(),this.template.fetch(this.id),this.request.bind(this.template)},methods:{deleteTypeModal(e){this.$refs.deleteQuestionTypeModal.toggle(),this.deleteQuestionType=e},deleteType(){const e=new A.Z(this.deleteQuestionType),t=this.deleteQuestionType.id,l=this.deleteQuestionType.main_question_type_id;e.delete().then((()=>{this.$refs.deleteQuestionTypeModal.toggle(),this.template.removedQuestionType(t,l),this.questionTypes.fetch()}))},addMultipleQuestionsModal(e){this.$refs.addMultipleQuestionsModal.toggle(),this.addMultipleQuestionType=e},addMultipleQuestions(){let e=this.addMultipleQuestionCount;if(!(e<0||e>50)){for(let t=0;t<e;t++)this.template.addQuestion(this.addMultipleQuestionType);this.addMultipleQuestionType=null,this.addMultipleQuestionCount=1,this.$refs.addMultipleQuestionsModal.toggle()}},submit(){this.request.update()}},computed:{dragOptions(){return{animation:200,disabled:!1,ghostClass:"ghost"}}}},O=l(8380);const V=(0,O.Z)(N,[["render",$]]);var j=V}}]);
//# sourceMappingURL=213.863ef65c.js.map