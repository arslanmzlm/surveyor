(self["webpackChunksurveyor_front"]=self["webpackChunksurveyor_front"]||[]).push([[528],{5109:function(t,e,s){"use strict";var r=s(3316),o=s(4905);const{t:a,te:i}=o["default"].global;class n{constructor(){(0,r.Z)(this,"errors",{}),(0,r.Z)(this,"status",null),(0,r.Z)(this,"message","")}has(t){for(const e in this.errors)if(e===t)return!0;return!1}any(){return null!==this.errors&&void 0!==this.errors&&Object.keys(this.errors).length>0}get(t){return this.errors[t]?this.errors[t][0]:null}record(t){this.status=t.response.status??null,this.errors=void 0!==t.response.data.errors?t.response.data.errors:{},this.message=void 0!==t.response.data.message?t.response.data.message:""}clear(t=null){if(t)return delete this.errors[t],void(this.errors.length||(this.status=null,this.message=""));this.errors={},this.status=null,this.message=""}getMessage(){return null!==this.status&&i("response.errors."+this.status)?a("response.errors."+this.status):this.message}}e.Z=n},7084:function(t,e,s){"use strict";s.d(e,{Z:function(){return h}});var r=s(3316),o=(s(1379),s(6216)),a=s(4905),i=s(4850),n=s(5109),l=s(8805);const c=1500;var u=s(7342),d=s(9756);const{t:p}=a["default"].global;class f{constructor(t=null){(0,r.Z)(this,"errors",new n.Z),(0,r.Z)(this,"model",null),(0,r.Z)(this,"submittable",!0),(0,r.Z)(this,"defaultOptions",{showSuccessToast:!0,showFailToast:!0}),this.model=t}bind(t){this.model=t}getData(){const t=this.model?.getData();return this.hasFile(this.model)?(0,u.serialize)(t,{indices:!0,booleansAsIntegers:!0}):t}hasFile(t){for(const e in t){if(t[e]instanceof File||t[e]instanceof Blob)return!0;if(("object"===typeof t[e]&&null!==t[e]||(0,d.isArray)(t[e]))&&this.hasFile(t[e]))return!0}return!1}submit(t,e,s){this.beforeSubmit();const r=this.model,a=this.getData();return new Promise(((n,u)=>{o.Z[t](e,a).then((t=>{if(s.showSuccessToast&&i.Z.fire(p(`response.success.${s.action}`),"success"),"undefined"!==typeof s.action&&["store","update"].includes(s.action)&&r.saveAttributes(t.data),"undefined"!==typeof s.redirect){const t=s.redirect;s.idForRedirect&&this.model&&(t.params={id:this.model.id}),setTimeout((()=>{l.Z.push(t)}),c)}return n(t)})).catch((t=>(this.errors.record(t),s.showFailToast&&i.Z.fire(this.errors.getMessage(),"error"),u(t)))).finally((()=>{this.afterSubmit()}))}))}beforeSubmit(){this.submittable=!1}afterSubmit(){this.submittable=!0}store(t={}){const e=this.model;return t={...this.defaultOptions,action:"store",...t},this.submit("post",`${e.getMainRoute()}/store`,t)}update(t={}){const e=this.model;return t={...this.defaultOptions,action:"update",...t},this.submit("post",`${e.getMainRoute()}/update/${e.id}`,t)}delete(t={}){const e=this.model;return t={...this.defaultOptions,action:"delete",...t},this.submit("delete",`${e.getMainRoute()}/delete/${e.id}`,t)}}var h=f},7342:function(t){function e(t){return void 0===t}function s(t){return null===t}function r(t){return"boolean"===typeof t}function o(t){return t===Object(t)}function a(t){return Array.isArray(t)}function i(t){return t instanceof Date}function n(t,s){return s?o(t)&&!e(t.uri):o(t)&&"number"===typeof t.size&&"string"===typeof t.type&&"function"===typeof t.slice}function l(t,e){return n(t,e)&&"string"===typeof t.name&&(o(t.lastModifiedDate)||"number"===typeof t.lastModified)}function c(t){return!e(t)&&t}function u(t,d,p,f){d=d||{},p=p||new FormData,d.indices=c(d.indices),d.nullsAsUndefineds=c(d.nullsAsUndefineds),d.booleansAsIntegers=c(d.booleansAsIntegers),d.allowEmptyArrays=c(d.allowEmptyArrays),d.noAttributesWithArrayNotation=c(d.noAttributesWithArrayNotation),d.noFilesWithArrayNotation=c(d.noFilesWithArrayNotation),d.dotsForObjectNotation=c(d.dotsForObjectNotation);const h="function"===typeof p.getParts;return e(t)||(s(t)?d.nullsAsUndefineds||p.append(f,""):r(t)?d.booleansAsIntegers?p.append(f,t?1:0):p.append(f,t):a(t)?t.length?t.forEach(((t,e)=>{let s=f+"["+(d.indices?e:"")+"]";(d.noAttributesWithArrayNotation||d.noFilesWithArrayNotation&&l(t,h))&&(s=f),u(t,d,p,s)})):d.allowEmptyArrays&&p.append(d.noAttributesWithArrayNotation?f:f+"[]",""):i(t)?p.append(f,t.toISOString()):o(t)&&!n(t,h)?Object.keys(t).forEach((e=>{const s=t[e];if(a(s))while(e.length>2&&e.lastIndexOf("[]")===e.length-2)e=e.substring(0,e.length-2);const r=f?d.dotsForObjectNotation?f+"."+e:f+"["+e+"]":e;u(s,d,p,r)})):p.append(f,t)),p}t.exports={serialize:u}},8840:function(t,e,s){"use strict";s.d(e,{Z:function(){return Z}});var r=s(3723),o=s(4386);const a={class:"grid gap-4 bg-white p-4 card sm:grid-cols-3 lg:col-span-12 lg:gap-5 lg:p-5"},i={class:"flex flex-col rounded-lg bg-slate-100 p-4 xl:p-5"},n=["src","title","alt"],l={key:1,class:"flex h-16 w-16 items-center justify-center rounded-lg border border-slate-200 bg-white dark:text-navy-600 dark:border-navy-600"},c={class:"mt-3 font-medium text-slate-700 line-clamp-2 dark:text-navy-100"},u=["title"],d={class:"mt-auto text-end space-x-3"},p={class:"grid grid-cols-1 gap-4 sm:col-span-2 lg:grid-cols-2 lg:gap-5"},f={class:"flex"},h={class:"space-y-1.5"},m={class:"text-base font-semibold text-slate-700 line-clamp-1 dark:text-navy-100"},g={class:"py-1 text-xs badge bg-info/10 px-1.5 text-info dark:bg-info/15"},b={class:"font-bold"},w=(0,r._)("br",null,null,-1),y={class:"py-1 text-xs badge bg-warning/10 px-1.5 text-warning dark:bg-warning/15"},k={class:"font-bold"},v={class:"ml-auto flex h-10 w-10 shrink-0 items-center justify-center text-white mask is-star bg-info"},_={class:"mt-auto flex pt-2"},x={class:"ml-auto space-x-3"};function A(t,e,s,A,$,W){const z=(0,r.up)("v-icon"),D=(0,r.up)("router-link"),Z=(0,r.up)("v-button");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",i,[s.workspace.logo?((0,r.wg)(),(0,r.iD)("img",{key:"isWorkspaceHasLogo",src:s.workspace.logoSrc,title:t.$t("labels.uploaded_image"),alt:t.$t("labels.description_image"),class:"h-16 w-16 rounded-lg border border-slate-200 object-cover"},null,8,n)):((0,r.wg)(),(0,r.iD)("div",l,[(0,r.Wm)(z,{name:"swatch",size:"11"})])),(0,r._)("h3",c,(0,o.zw)(s.workspace.name),1),(0,r._)("p",{class:"text-xs+",title:t.$t("attributes.created_at")},(0,o.zw)(s.workspace.createdAtLocal),9,u),(0,r._)("div",d,[(0,r.Wm)(D,{to:{name:"app.workspace.edit",params:{id:s.workspace.id}},title:t.$t("labels.edit"),class:"h-10 w-10 rounded-full p-0 font-medium text-white btn bg-primary hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{name:"pencil-square",size:"5"})])),_:1},8,["to","title"]),s.showDestroy?((0,r.wg)(),(0,r.j4)(Z,{key:"workspaceShowDeleteButton",color:"error",icon:"",size:10,title:t.$t("labels.delete"),onClick:e[0]||(e[0]=t=>W.destroy(s.workspace))},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{name:"archive-delete",size:"5"})])),_:1},8,["title"])):(0,r.kq)("",!0)])]),(0,r._)("div",p,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.workspace.groups,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"col-span-1 flex flex-col rounded-lg bg-slate-100 p-5"},[(0,r._)("div",f,[(0,r._)("div",h,[(0,r._)("div",m,(0,o.zw)(e.name),1),(0,r._)("div",g,[(0,r.Uk)((0,o.zw)(t.$t("labels.patient_count"))+":  ",1),(0,r._)("span",b,[(0,r.Uk)((0,o.zw)(e.size)+" ",1),(0,r._)("span",null,(0,o.zw)(t.$t("labels.saved_patient_count",{count:e.patients_count})),1)])]),w,(0,r._)("div",y,[(0,r.Uk)((0,o.zw)(t.$t("labels.survey_count"))+":  ",1),(0,r._)("span",k,(0,o.zw)(e.surveys_count),1)])]),(0,r._)("div",v,[(0,r.Wm)(z,{name:"user-group",size:"5"})])]),(0,r._)("div",_,[(0,r._)("div",x,[(0,r.Wm)(D,{to:{name:"app.group.patients",params:{id:e.id}},class:"hover:text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(t.$t("titles.patients")),1)])),_:2},1032,["to"]),(0,r.Wm)(D,{to:{name:"app.group.surveys",params:{id:e.id}},class:"hover:text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(t.$t("titles.surveys")),1)])),_:2},1032,["to"])])])])))),128))])])}var $=s(2924),W={name:"WorkspaceItem",emits:["destroyed"],props:{workspace:{type:$.Z},showDestroy:{type:Boolean,default:!1}},methods:{destroy(t){this.$emit("destroyed",t)}}},z=s(8380);const D=(0,z.Z)(W,[["render",A]]);var Z=D},1528:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return m}});var r=s(3723),o=s(4386);const a=(0,r._)("i",{class:"fa fa-plus fa-sm fa-fw"},null,-1),i={key:"isWorkspaceCollectionNotEmpty",class:"grid gap-5"};function n(t,e,s,n,l,c){const u=(0,r.up)("router-link"),d=(0,r.up)("breadcrumb-list"),p=(0,r.up)("workspace-item"),f=(0,r.up)("v-button"),h=(0,r.up)("v-modal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d,{items:l.breadcrumbs},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{to:{name:"app.workspace.create"},class:"text-white btn bg-primary hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"},{default:(0,r.w5)((()=>[a,(0,r.Uk)(" "+(0,o.zw)(t.$t("models.workspace.add")),1)])),_:1},8,["to"])])),_:1},8,["items"]),l.workspaces.empty?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",i,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.workspaces,(t=>((0,r.wg)(),(0,r.j4)(p,{key:t.id,workspace:t,"show-destroy":"",onDestroyed:c.deleteModal},null,8,["workspace","onDestroyed"])))),128))])),(0,r.Wm)(h,{ref:"modal"},{title:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(t.$t("modal.titles.delete")),1)])),body:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(t.$t("modal.messages.delete")),1)])),buttons:(0,r.w5)((()=>[(0,r.Wm)(f,{color:"error",onClick:c.deleteData},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(t.$t("labels.delete")),1)])),_:1},8,["onClick"])])),_:1},512)],64)}var l=s(391),c=s(7415),u=s(7084),d=s(8840),p={name:"AppWorkspaceList",components:{WorkspaceItem:d.Z},data(){return{breadcrumbs:[{title:this.$t("titles.workspaces"),active:!0}],workspaces:new c["default"],deleteSelect:null}},created(){this.workspaces.fetchWithFilters()},methods:{logoSrc(t){return`${l.FX}/images/workspaces/logos/${t}`},deleteModal(t){this.deleteSelect=t,this.$refs.modal.toggle()},deleteData(){const t=new u.Z(this.deleteSelect);t.delete().then((()=>{this.$refs.modal.toggle(),this.workspaces.fetchWithFilters()}))}}},f=s(8380);const h=(0,f.Z)(p,[["render",n]]);var m=h}}]);
//# sourceMappingURL=528.f0ba060f.js.map